<h1>Usuários Cadastrados</h1>
{{#if resp.length}}
    <ul>
        {{#each resp}}
        <li>
            <h2>{{nome}}</h2>
            <p>{{username}}</p>
            <button onclick="desativarUsuarios('{{username}}')">desativar</button>
        </li>
        {{/each}}
    </ul>
{{else}}
    <p>Não há usuários cadastrados.</p>
{{/if}}

<script>
  let desativarUsuarios = async function(username)  {
    const resposta = await fetch('/desativarUsuario', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ username })
    });

    if (resposta.ok) {
      window.location.reload();
    } else {
      console.log('Erro ao desativar usuário');
    }
  }
</script>